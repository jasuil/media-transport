<!DOCTYPE html>
<html>
  <head>
    <title>HLS Continuous Player</title>
  </head>
  <body>
  </body>
  <script src="/hls.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script> -->
<!-- Or if you want the latest version from the main branch -->
<!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@canary"></script> -->
<video id="video" controls autoplay></video>
<div id="video-state"></div>
<script>
  var video = document.getElementById('video');
  var hls;

  if (Hls.isSupported()) {
    hls = new Hls();
  }
  // HLS.js is not supported on platforms that do not have Media Source
  // Extensions (MSE) enabled.
  //
  // When the browser has built-in HLS support (check using `canPlayType`),
  // we can provide an HLS manifest (i.e. .m3u8 URL) directly to the video
  // element through the `src` property. This is using the built-in support
  // of the plain video element, without using HLS.js.
  else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = videoSrc;
  }

  function loadHlsSource(hls, video) {
    const streamUrl = '/get-m3u8';
    hls.loadSource(streamUrl);
    hls.attachMedia(video);
  }

  function playNextStream(hls, video) {
      //hls.on(Hls.Events.MANIFEST_PARSED, () => {
        video.play();
      //});
  }

if (hls !== undefined) {
    loadHlsSource(hls, video);
}

</script>
